import{d as b,U as k,L as I,p as m,a0 as B,l as S,r as d,f as D,g as a,w as n,a1 as z,a2 as F,y as A,z as L,o as U,a3 as w,a4 as C,x as f,v as h,t as g,a5 as $}from"./vendor-961d3d93.js";import{_ as E,A as _}from"./index-79200e51.js";const P=b({name:"login",components:{UserOutlined:k,LockOutlined:I},setup(){let e=m(!1),t=m(60),s=B({mobile:"15207109838",password:"",code:"",identify:"",tenantId:"111111111111111111"}),i=m("paw"),v=S();const y=()=>{i.value=="paw"&&_.login({mobile:s.mobile,password:s.password,scope:"PC",tenantId:"111111111111111111"}).then(o=>{o.code==200&&p(o.data.token)}).catch(o=>{}),i.value=="mobile"&&_.authorize_login({mobile:s.mobile,code:s.code,identify:s.identify,scope:"PC",tenantId:"111111111111111111"}).then(o=>{o.code==200&&p(o.data.token)}).catch(o=>{})},p=o=>{o&&(window.localStorage.setItem("token",o),z.success({message:"\u767B\u5F55\u6210\u529F",icon:F($,{style:"color:#108ee9"}),duration:1}),setTimeout(()=>{v.push({path:"/"})},500))};return{loginType:i,form_data:s,codeType:e,codeTime:t,getToken:y,getCode:()=>{e.value||(e.value=!0,_.getVerifyCode({mobile:s.mobile,scope:"PC",tenantId:"111111111111111111"}).then(o=>{window.sessionStorage.setItem("identify",o.data),s.identify=o.data;let r=setInterval(()=>{t.value>0&&t.value<=60?t.value--:(e.value=!1,clearInterval(r),t.value=60)},1e3)}).catch(o=>{e.value=!1}))},checkLoginType:o=>{i.value=o==="paw"?"mobile":"paw",window.sessionStorage.setItem("loginType",i.value)}}},created(){window.sessionStorage.getItem("loginType")&&(this.loginType=window.sessionStorage.getItem("loginType"),this.form_data.identify=window.sessionStorage.getItem("identify"))}}),V=e=>(A("data-v-11fcdd70"),e=e(),L(),e),N={class:"login-box"},O=V(()=>g("div",{class:"login-logo"},[g("h1",null,"Antd Admin")],-1)),j={class:"bottom"},R=f("\u767B\u5F55");function q(e,t,s,i,v,y){const p=d("user-outlined"),c=d("a-input"),u=d("a-form-item"),o=d("lock-outlined"),r=d("a-button"),T=d("a-form");return U(),D("div",N,[O,a(T,{layout:"horizontal"},{default:n(()=>[a(u,{"v-model":e.form_data},{default:n(()=>[a(c,{size:"large",placeholder:"\u8D26\u53F7:15207109838",value:e.form_data.mobile,"onUpdate:value":t[0]||(t[0]=l=>e.form_data.mobile=l),autocomplete:""},{prefix:n(()=>[a(p,{type:"user"})]),_:1},8,["value"])]),_:1},8,["v-model"]),w(a(u,null,{default:n(()=>[a(c,{size:"large",value:e.form_data.password,"onUpdate:value":t[1]||(t[1]=l=>e.form_data.password=l),type:"password",placeholder:"\u5BC6\u7801:123456",autocomplete:"new-password"},{prefix:n(()=>[a(o,{type:"user"})]),_:1},8,["value"])]),_:1},512),[[C,e.loginType==="paw"]]),w(a(u,null,{default:n(()=>[a(c,{size:"large",value:e.form_data.code,"onUpdate:value":t[2]||(t[2]=l=>e.form_data.code=l),type:"text",placeholder:"\u9A8C\u8BC1\u7801",autocomplete:"new-password"},{suffix:n(()=>[a(r,{class:"geCode",type:"text",onClick:e.getCode,disabled:e.codeType},{default:n(()=>[f(h(e.codeType?e.codeTime+"\u79D2\u540E\u518D\u6B21\u83B7\u53D6":"\u83B7\u53D6\u9A8C\u8BC1\u7801"),1)]),_:1},8,["onClick","disabled"])]),_:1},8,["value"])]),_:1},512),[[C,e.loginType==="mobile"]]),a(u,null,{default:n(()=>[g("div",j,[a(r,{type:"primary","html-type":"submit",size:"large",onClick:e.getToken},{default:n(()=>[R]),_:1},8,["onClick"]),a(r,{type:"link",size:"large",onClick:t[3]||(t[3]=l=>e.checkLoginType(e.loginType)),class:"txt-submit"},{default:n(()=>[f(h(e.loginType==="paw"?"\u77ED\u4FE1\u9A8C\u8BC1\u767B\u5F55":"\u8D26\u53F7\u5BC6\u7801\u767B\u5F55"),1)]),_:1})])]),_:1})]),_:1})])}var J=E(P,[["render",q],["__scopeId","data-v-11fcdd70"]]);export{J as default};
